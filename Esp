local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- ### BÜYÜK ESP AYARLARI ###
local SETTINGS = {
    BoxColor = Color3.fromRGB(255, 215, 0), -- Parlak Sarı
    TextColor = Color3.fromRGB(255, 255, 255), -- Beyaz
    BoxThickness = 2.5,  -- Daha kalın kutu çizgileri
    TextSize = 20,       -- Büyük yazı boyutu
    Outline = true       -- Yazı etrafında siyah gölge (daha iyi okunur)
}

local function CreateESP(Player)
    -- Çizim Elemanları
    local Box = Drawing.new("Square")
    Box.Visible = false
    Box.Color = SETTINGS.BoxColor
    Box.Thickness = SETTINGS.BoxThickness
    Box.Filled = false

    local Name = Drawing.new("Text")
    Name.Visible = false
    Name.Color = SETTINGS.TextColor
    Name.Size = SETTINGS.TextSize
    Name.Center = true
    Name.Outline = SETTINGS.Outline
    Name.Font = 2 -- Modern Bold Font

    local function Update()
        local Connection
        Connection = RunService.RenderStepped:Connect(function()
            if Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") and Player.Character:FindFirstChild("Humanoid") and Player ~= LocalPlayer and Player.Character.Humanoid.Health > 0 then
                
                local RootPart = Player.Character.HumanoidRootPart
                local Head = Player.Character:FindFirstChild("Head")
                if not Head then return end

                local RootPos, OnScreen = Camera:WorldToViewportPoint(RootPart.Position)
                local HeadPos = Camera:WorldToViewportPoint(Head.Position + Vector3.new(0, 0.5, 0))
                local LegPos = Camera:WorldToViewportPoint(RootPart.Position - Vector3.new(0, 3, 0))

                if OnScreen then
                    -- Kutu Boyutlandırma (Daha Geniş ve Belirgin)
                    local BoxHeight = math.abs(HeadPos.Y - LegPos.Y)
                    local BoxWidth = BoxHeight / 1.5
                    
                    Box.Size = Vector2.new(BoxWidth, BoxHeight)
                    Box.Position = Vector2.new(RootPos.X - BoxWidth / 2, RootPos.Y - BoxHeight / 2)
                    Box.Visible = true

                    -- İsim ve Mesafe (Büyük Yazı)
                    local Distance = math.floor((LocalPlayer.Character.HumanoidRootPart.Position - RootPart.Position).Magnitude)
                    Name.Text = Player.Name .. " [" .. Distance .. "m]"
                    Name.Position = Vector2.new(RootPos.X, (RootPos.Y - BoxHeight / 2) - 25)
                    Name.Visible = true
                else
                    Box.Visible = false
                    Name.Visible = false
                end
            else
                Box.Visible = false
                Name.Visible = false
                
                if not Player.Parent then
                    Box:Remove()
                    Name:Remove()
                    Connection:Disconnect()
                end
            end
        end)
    end
    coroutine.wrap(Update)()
end

-- Mevcut Oyuncular
for _, p in pairs(Players:GetPlayers()) do
    if p ~= LocalPlayer then CreateESP(p) end
end

-- Yeni Gelenler
Players.PlayerAdded:Connect(CreateESP)

-- Başarı Bildirimi
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Yildiray ESP",
    Text = "Büyük ve Modern ESP Aktif!",
    Duration = 5
})
